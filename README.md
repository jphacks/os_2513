# えっ？なんつった？
<img width="2934" height="1638" alt="image" src="https://github.com/user-attachments/assets/a1ac11f5-3364-4182-9110-ddd3dac46b05" />


## 製品概要
聞き逃し×Tech：他のことに気を取られて聞き逃してしまった「人の話」を要約して表示してくれるアプリ
<img src="https://github.com/user-attachments/assets/bc9b70c3-161a-4896-882a-deebf7aee4c2" width="200" alt="sample image">

### 背景(製品開発のきっかけ、課題等）
みなさん、このような経験はありませんか？「まずい、今の人の話聞いていなかった。」と。
直前の会話を聞いておらず、生返事をして母親に叱られた経験、会議中に急に意見を求められて困った経験。
様々な「聞き逃し」によって冷や汗をかいた経験をなくそうとこのアプリを開発しました。

### 製品説明（具体的な製品の説明）
本アプリは、常時バックグラウンドで会話を認識します。
とっさに聞き逃した会話を表示してほしいときは、「通知をクリック」するか「え？なんつった？」と端末のマイクに向かって話しかけてください。
AIが直前の会話の要約を画面上に表示し、あなたのピンチを手助けしてくれます。
なお、会話は直近10フレーズ分のみ保存しており、それ以前のものは自動的に削除されております。
また、アクションを起こすまでは会話内容は外部には送信されません。ご安心ください。

### 特長
#### 1. 常時バックグラウンド実行で突然のピンチでも安心
「人の話を聞いていなかった！」ピンチは突然訪れます。
そんな時に備えて、このアプリはユーザのとなりで聞き耳を立てております。
いわば「秘書」のような感覚でお使いください。

#### 2. ピンチワードを検出して即座に要約を表示
「なんつった？」とアプリにピンチをささやいてください。
通知が表示され、クリックするとまもなく要約が生成されます。
![Screenshot_2025-10-19-14-48-22-44](https://github.com/user-attachments/assets/7ed1d7c8-500e-490f-8504-21dd67974ff6)

#### 3. 会話の文脈＆対応すべき事項を簡潔に表示
ピンチのときに必要な「どんな話題を話しかけられたのか」「何をしなければならないのか」を簡潔に表示します。
AIが判断した優先度も表示されるため、タスクの緊迫感も一目で分かります。


### 解決出来ること
* うっかり人の話を聞き逃したことによって生じるコミュニケーション上の摩擦を解消します。

### 今後の展望
*  トリガーとなるリアルタイムでの警告を表示
*  家や会社など、シーンに最適化された内容を表示

### 注力したこと（こだわり等）
* 画面を閉じてもアプリが停止しないシステムの導入
* キーワードの文字起こしの表記揺れに対応
* 常時過去10フレーズ分の履歴を保持

## 開発技術

### 活用した技術
#### API・データ
* Google Gemini API　会話文の要約
* Google Speech-To-Text　音声からテキストヘの変換

#### フレームワーク・ライブラリ・モジュール
* Android studio

#### デバイス
* Androidスマートフォン

### 独自技術
#### ハッカソンで開発した独自機能・技術
1. バックグラウンドでの実行

 録音処理の再帰呼び出しとバックグラウンド実行のロジックにより、アプリ画面を閉じても音声を録音し続けます。 周囲の会話を気にかけながらも自由にスマホを操作することが可能です。
 ![Screenshot_2025-10-19-14-47-59-33](https://github.com/user-attachments/assets/4352e60e-a2a9-4810-8abc-e251680baef0) 
2. キーワード検出における簡易的な正規化

   トリガーとなるキーワードを確実に検出できるよう、空白や句読点の有無などの誤差の影響を排除するシステムを作成しています。
3. 過去に遡った会話履歴の保持とメモリ使用量に対する配慮の両立

   過去10フレーズ分のみの台詞を常時保持することにより、直前の数単語だけではなく、ある程度の文脈を持った履歴を参照することが可能です。保持上限を超えた履歴は破棄されるため、メモリを圧迫しません。
4. プロンプトエンジニアリング

   このアプリが利用される状況をプロンプト上に詳細に記載することで、単なる会話の要約にとどまらず、このアプリの想定ユーザーに取って有用な情報のみを要約、提示することが可能です。
   https://github.com/jphacks/os_2513/blob/master/app/src/main/java/com/example/myapplication/MainActivity.kt




